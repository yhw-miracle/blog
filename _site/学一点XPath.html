<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="generator" content="Jekyll">

  <title>学一点XPath</title>

  <link rel="stylesheet" href="/assets/css/main.css">
  
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" /> <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>学一点XPath | yhw-miracle’s Blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="学一点XPath" />
<meta name="author" content="yhw-miracle" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="XPath 是一门在 XML 文档中查找信息的语言，用于在 XML 文档中通过元素和属性进行导航。XPath 虽然被设计用来搜索 XML 文档，不过它也能很好地在 HTML 文档中工作，大部分浏览器都支持通过 XPath 来查询节点。XPath 叫做 path，说明它是以路径表达式的形式来搜索元素的，这种路径表达式与我们计算机系统上的文件系统路径表达很类似。接下来，我从节点、语法、轴和运算符这四个部分来学习 XPath 在 XML 文档中的使用。" />
<meta property="og:description" content="XPath 是一门在 XML 文档中查找信息的语言，用于在 XML 文档中通过元素和属性进行导航。XPath 虽然被设计用来搜索 XML 文档，不过它也能很好地在 HTML 文档中工作，大部分浏览器都支持通过 XPath 来查询节点。XPath 叫做 path，说明它是以路径表达式的形式来搜索元素的，这种路径表达式与我们计算机系统上的文件系统路径表达很类似。接下来，我从节点、语法、轴和运算符这四个部分来学习 XPath 在 XML 文档中的使用。" />
<link rel="canonical" href="http://localhost:4000/%E5%AD%A6%E4%B8%80%E7%82%B9XPath" />
<meta property="og:url" content="http://localhost:4000/%E5%AD%A6%E4%B8%80%E7%82%B9XPath" />
<meta property="og:site_name" content="yhw-miracle’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-05T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"XPath 是一门在 XML 文档中查找信息的语言，用于在 XML 文档中通过元素和属性进行导航。XPath 虽然被设计用来搜索 XML 文档，不过它也能很好地在 HTML 文档中工作，大部分浏览器都支持通过 XPath 来查询节点。XPath 叫做 path，说明它是以路径表达式的形式来搜索元素的，这种路径表达式与我们计算机系统上的文件系统路径表达很类似。接下来，我从节点、语法、轴和运算符这四个部分来学习 XPath 在 XML 文档中的使用。","author":{"@type":"Person","name":"yhw-miracle"},"@type":"BlogPosting","url":"http://localhost:4000/%E5%AD%A6%E4%B8%80%E7%82%B9XPath","headline":"学一点XPath","dateModified":"2018-08-05T00:00:00+08:00","datePublished":"2018-08-05T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/%E5%AD%A6%E4%B8%80%E7%82%B9XPath"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>
  <div id="wrapper">
    <header>
  <div>
    <a href="/">
    
    <h1>YHW-MIRACLE</h1>
    </a>
    <div class="header-links">
      <a href="/all_posts">
    <h2 class="header-link">All_Posts | </h2>
</a>
<a href="/about">
    <h2 class="header-link">About | </h2>
</a>
<a href="/categories">
    <h2 class="header-link">Categories | </h2>
</a>
<a href="/tags">
    <h2 class="header-link">Tags</h2>
</a>
<!--<a href="/atom.xml"><h2 class="header-link">RSS</h2></a>-->

    </div>
  </div>
</header>

    <div class="container">
      <section id="main_content">
        <article>
  <h2 align="center">学一点XPath</h2>
  <img src="/images/authorize.png" />
  <center>
    yhw-miracle writed in <time datetime="2018-08-05T00:00:00+08:00" class="by-line">August 5th, 2018</time>
  </center>
  <p>XPath 是一门在 XML 文档中查找信息的语言，用于在 XML 文档中通过元素和属性进行导航。XPath 虽然被设计用来搜索 XML 文档，不过它也能很好地在 HTML 文档中工作，大部分浏览器都支持通过 XPath 来查询节点。XPath 叫做 path，说明它是以路径表达式的形式来搜索元素的，这种路径表达式与我们计算机系统上的文件系统路径表达很类似。接下来，我从节点、语法、轴和运算符这四个部分来学习 XPath 在 XML 文档中的使用。</p>

<h3 id="1-xpath-节点">1. XPath 节点</h3>
<p>在 XPath 中，XML 文档是被看作节点树，有七种类型的节点：元素、属性、文本、命名空间、处理指令、注释和文档（根）节点。</p>

<p>在 XML 文档中，XPath 表示各节点的关系有：父 (Parent)、子 (Children)、同胞 (Sibling)、先辈 (Ancestor)、后代 (Descendant)。</p>

<h3 id="2-xpath-语法">2. XPath 语法</h3>
<h4 id="21-路径表达式">2.1 路径表达式</h4>
<p>XPath 使用路径表达式来选取　XML 文档中的节点或节点集，节点是沿着路径 (path) 或者步 (steps) 来选取的。路径表达式语法规则如下表所示。</p>

<table>
  <thead>
    <tr>
      <th>表达式</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>nodename</td>
      <td>选取此节点的所有子节点</td>
    </tr>
    <tr>
      <td>/</td>
      <td>从根节点选取</td>
    </tr>
    <tr>
      <td>//</td>
      <td>选择任意位置的某个节点</td>
    </tr>
    <tr>
      <td>.</td>
      <td>选取当前节点</td>
    </tr>
    <tr>
      <td>..</td>
      <td>选取当前节点的父节点</td>
    </tr>
    <tr>
      <td>@</td>
      <td>选取属性</td>
    </tr>
  </tbody>
</table>

<p>路径表达式中绝对路径、相对路径和步的概念如下所示。</p>

<blockquote>
  <ol>
    <li>绝对路径起始于正斜杠 (/)。</li>
    <li>相对路径可以起始于任何节点。</li>
    <li>步包括轴、节点测试、零个或多个谓语，用来更深入地选取节点集，语法为：轴名称::节点测试[谓语]</li>
  </ol>
</blockquote>

<h4 id="22-谓语">2.2 谓语</h4>
<p>路径表达式的实现效果是选取所有符合条件的节点，XPath 还能选取某个特定的节点或者包含一个特定值的节点，这里需要用到谓语，谓语语法是用中括号指定特定的节点。</p>

<table>
  <thead>
    <tr>
      <th>表达式</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>[index]</td>
      <td>选取某节点的第 index 元素</td>
    </tr>
    <tr>
      <td>[last()]</td>
      <td>选取某节点的最后一个元素</td>
    </tr>
    <tr>
      <td>[position()&lt;index]</td>
      <td>选择某节点的前 index 个元素</td>
    </tr>
    <tr>
      <td>[@name]</td>
      <td>选取包含 name 属性的元素</td>
    </tr>
    <tr>
      <td>[name&gt;iddex]</td>
      <td>选取属性 name 值大于 index　的元素</td>
    </tr>
  </tbody>
</table>

<h4 id="23-通配符">2.3 通配符</h4>
<p>XPath 在进行多节点选取时，可以使用通配符“*”匹配未知元素，使用通配符“|”一次选取多条路径。</p>

<h4 id="24-实例">2.4 实例</h4>
<p>下面以上述 XML 文档为例，通过 XPath 选取元素，演示 XPath 的语法。</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="nt">&lt;classroom&gt;</span>
    <span class="nt">&lt;student&gt;</span>
        <span class="nt">&lt;id&gt;</span>10001<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;name</span> <span class="na">lang=</span><span class="s">"zh-CN"</span><span class="nt">&gt;</span>Tom<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;age&gt;</span>22<span class="nt">&lt;/age&gt;</span>
        <span class="nt">&lt;sex&gt;</span>male<span class="nt">&lt;/sex&gt;</span>
    <span class="nt">&lt;/student&gt;</span>
    <span class="nt">&lt;student&gt;</span>
        <span class="nt">&lt;id&gt;</span>10002<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;name</span> <span class="na">lang=</span><span class="s">"zh-CN"</span><span class="nt">&gt;</span>Jack<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;age&gt;</span>21<span class="nt">&lt;/age&gt;</span>
        <span class="nt">&lt;sex&gt;</span>female<span class="nt">&lt;/sex&gt;</span>
    <span class="nt">&lt;/student&gt;</span>
<span class="nt">&lt;/classroom&gt;</span>
</code></pre></div></div>

<table>
  <tbody>
    <tr>
      <td>实现效果</td>
      <td>路径表达式</td>
    </tr>
    <tr>
      <td>选取 classroom 元素所有子节点</td>
      <td>classroom</td>
    </tr>
    <tr>
      <td>选取根元素 classroom</td>
      <td>/classroom</td>
    </tr>
    <tr>
      <td>选取元素 classroom 的子元素的所有 student 元素</td>
      <td>classroom/student</td>
    </tr>
    <tr>
      <td>选取元素 student</td>
      <td>//student</td>
    </tr>
    <tr>
      <td>选取元素 classroom 的后代 student 元素</td>
      <td>classroom//studetn</td>
    </tr>
    <tr>
      <td>选取名为 zh-CN 所有属性</td>
      <td>//@lang</td>
    </tr>
    <tr>
      <td>选取元素 classroom 的第 1 个 student 子元素</td>
      <td>classroom/student[1]</td>
    </tr>
    <tr>
      <td>选取元素 name，且有值为　zh-CN 的 lang 属性</td>
      <td>//name[@lang=’zh-CN’]</td>
    </tr>
    <tr>
      <td>选取元素 classroom 的所有子元素</td>
      <td>classroom/*</td>
    </tr>
    <tr>
      <td>选取文档中所有元素</td>
      <td>//*</td>
    </tr>
    <tr>
      <td>选取所有带有属性的 name 元素</td>
      <td>//name[@*]</td>
    </tr>
    <tr>
      <td>选取元素 student 的所有 name 元素和 age 元素</td>
      <td>//student/name ｜ //student/age</td>
    </tr>
  </tbody>
</table>

<h3 id="3-xpath-轴">3. XPath 轴</h3>
<p>轴定义了所选节点与当前节点之间的树关系，XPath 中使用到的节点集如下表所示。</p>

<table>
  <thead>
    <tr>
      <th>轴</th>
      <th>含义</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>child</td>
      <td>选取当前节点的所有子元素</td>
    </tr>
    <tr>
      <td>parent</td>
      <td>选取当前节点的父节点</td>
    </tr>
    <tr>
      <td>ancestor</td>
      <td>选取当前节点的所有先辈节点</td>
    </tr>
    <tr>
      <td>ancestor-or-self</td>
      <td>选取当前节点的所有先辈节点以及当前节点本身</td>
    </tr>
    <tr>
      <td>descendant</td>
      <td>选取当前节点的所有后代元素</td>
    </tr>
    <tr>
      <td>descendant-or-self</td>
      <td>选取当前节点的所有后代元素以及当前节点本身</td>
    </tr>
    <tr>
      <td>preceding</td>
      <td>选取文档中当前节点的开始标记之前的所有节点</td>
    </tr>
    <tr>
      <td>following</td>
      <td>选取文档中当前节点的结束标记之后的所有节点</td>
    </tr>
    <tr>
      <td>preceding-sibling</td>
      <td>选取当前节点之前的所有同级节点</td>
    </tr>
    <tr>
      <td>following-sibling</td>
      <td>选取当前节点之后的所有同级节点</td>
    </tr>
    <tr>
      <td>self</td>
      <td>选取当前节点</td>
    </tr>
    <tr>
      <td>attribute</td>
      <td>选取当前节点的所有属性</td>
    </tr>
    <tr>
      <td>namespace</td>
      <td>选取当前节点的所有命名空间节点</td>
    </tr>
  </tbody>
</table>

<h3 id="4-xpath-运算符">4. XPath 运算符</h3>
<p>XPath 表达式可以返回节点集、字符串、逻辑值和数字，表达式中可以使用运算符进行连接，运算符如下表所示。</p>

<table>
  <thead>
    <tr>
      <th>运算符</th>
      <th>含义</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>｜</td>
      <td>计算两个节点集</td>
    </tr>
    <tr>
      <td>+</td>
      <td>加法</td>
    </tr>
    <tr>
      <td>-</td>
      <td>减法</td>
    </tr>
    <tr>
      <td>*</td>
      <td>乘法</td>
    </tr>
    <tr>
      <td>div</td>
      <td>除法</td>
    </tr>
    <tr>
      <td>=</td>
      <td>等于</td>
    </tr>
    <tr>
      <td>!=</td>
      <td>不等于</td>
    </tr>
    <tr>
      <td>&lt;</td>
      <td>小于</td>
    </tr>
    <tr>
      <td>&lt;=</td>
      <td>小于等于</td>
    </tr>
    <tr>
      <td>&gt;</td>
      <td>大于</td>
    </tr>
    <tr>
      <td>&gt;=</td>
      <td>大于等于</td>
    </tr>
    <tr>
      <td>or</td>
      <td>或</td>
    </tr>
    <tr>
      <td>and</td>
      <td>与</td>
    </tr>
    <tr>
      <td>mod</td>
      <td>取余</td>
    </tr>
  </tbody>
</table>


</article>


	<div class="tags">
	<img src="/images/tag.png" />
	
		<a href="/tag/XPath">XPath</a>
	
		<a href="/tag/节点">节点</a>
	
	</div>






	<div class="categories">
	<img src="/images/category.png" />
	
	  <a href="/category/知识总结">知识总结</a>
	
	</div>




<div class="pagination">
    上一篇：
    
      <a href="/Python%E5%AE%9E%E7%8E%B0HTTP%E8%AF%B7%E6%B1%82" class="previous">
        <img src="/images/previous.png" />
      </a>
    
  
    | 下一篇：
    
      <a href="/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B" class="next">
        <img src="/images/next.png" />
      </a>
    
  </div>


      </section>
    </div>
  </div>

  

  <div align="center" id="qecode_img">
  <hr />
  <p>欢迎关注，我们一起进行认知迭代！</p>
  <img src="/images/qrcode_for_gh_5efb2780ab44_258.jpg" /><br />
  痛点就是起点
</div>

<footer>
  <!-- <a href="https://blogs.yhw-miracle.cn">
    <span>
        <b>yhw-miracle</b>
    </span>
    
    <span>© 2016 - 2019</span>
  </a> -->
</footer>

<div align="center" style="font-size: 13px;">
  <hr />
  <span>&copy; 2016 - 2019</span>基于
  <a href="https://jekyllrb.com">jekyll</a> | 
  <a href="https://github.com">Github Pags</a> | 
  By <a href="blogs.yhw-miracle.cn">yhw-miracle</a>
</div>


  <!--  -->
</body>
</html>