<html>
  <head><meta name="generator" content="Hexo 3.8.0">
    <title>正则表达式 - 痛点就是起点</title>
    <link href="/images/fav.png" rel="shortcut icon">
<link href="/atom.xml" rel="alternate" type="application/rss+xml">
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/responsive.css">
<script src="/js/jquery.js"></script>
<script src="/js/basics.js"></script>
<meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport">
<meta content="text/html; charset=utf-8" http-equiv="content-type">


  </head>
  <body>
    <header>
  <a id="go-back-home" href="/"><img src="/images/logo.jpg" alt="Home" width="53" height="59"></a>
  <p>痛点就是起点</p>
  <p>Speaking is as important as doing!</p>
</header>

    <div id="container">
      <div class="block">
  
    <a class="main" href="/">Home</a>
  
    <a class="main" href="/ToYou">ToYou</a>
  
    <a class="main" href="/categories">Categories</a>
  
    <a class="main" href="/atom.xml">RSS</a>
  
</div>

      <section class="paging">
  
    <div class="left">
      <a href="/2018/08/08/python实现正则/">
        ‹
      </a>
    </div>
  
  
    <div class="right">
      <a href="/2018/08/06/Python实现HTTP请求/">
        ›
      </a>
    </div>
  
</section>

      <div class="content">
        <section class="post">
          <h1>
            <div class="date">2018-08-07</div>
            正则表达式
          </h1>
          <p>正则表达式是由普通字符以及特殊字符（称为“元字符”）组成的文字模式，可以作为模板，用来描述在搜索文本时要匹配的一个或多个字符串。</p>
<h3 id="1-常见元字符"><a href="#1-常见元字符" class="headerlink" title="1. 常见元字符"></a>1. 常见元字符</h3><p>元字符主要作用有：用来匹配字符、用来匹配位置、用来匹配数量和用来匹配模式。常见的元字符如下表所示。</p>
<table>
<thead>
<tr>
<th>元字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td>\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母、数字、下划线和汉子</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意空白符，包括空格、制表符、换行符、中午全角空格</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结束</td>
</tr>
</tbody>
</table>
<h3 id="2-字符转义"><a href="#2-字符转义" class="headerlink" title="2. 字符转义"></a>2. 字符转义</h3><p>如果需要匹配元字符本身，我们需要用到字符转义来实现，使用 “\” 来取消元字符的特殊含义。</p>
<blockquote>
<p>例如，需求是匹配 <a href="https://yhw-miracle.win/" target="_blank" rel="noopener">https://yhw-miracle.win/</a> 这个网址时，正则表达式可以写成 <a href="https://yhw-miracle\.win/。" target="_blank" rel="noopener">https://yhw-miracle\.win/。</a></p>
</blockquote>
<h3 id="3-重复"><a href="#3-重复" class="headerlink" title="3. 重复"></a>3. 重复</h3><p>正则表达式中用于匹配重复的字符串，可以使用限定符描述，简化正则表达式的书写。</p>
<table>
<thead>
<tr>
<th>限定符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复 n 次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复 n 次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复 n 到 m 次</td>
</tr>
</tbody>
</table>
<h3 id="4-字符集合"><a href="#4-字符集合" class="headerlink" title="4. 字符集合"></a>4. 字符集合</h3><p>如果需求是匹配没有预定义元字符的字符集合，例如需求是匹配 a,b,c,d,e 中任意一个字符，可以使用自定义字符集合。正则表达式支持自定义字符集合，用 [] 来实现自定义字符集合，中括号内写要匹配的自定义字符集合。对于上述需求，可以使用 [abcde] 来匹配待定字符串。</p>
<p>中括号内不仅可以写自定义的字符集合，还可以指定自定义字符范围，例如 [0-9] 与 “\d” 是等价的，[a-z0-9A-Z_] 与 “\w” 是等价的（英文情况下）。</p>
<h3 id="5-分支条件"><a href="#5-分支条件" class="headerlink" title="5. 分支条件"></a>5. 分支条件</h3><p>正则表达式支持多种匹配规则，满足任意一种规则都是匹配成功，这叫作分支条件，用 “|” 把不同匹配规则分隔开即可。</p>
<blockquote>
<p>例如匹配 7－11 位 QQ 号，可以利用分支条件。<br>正则表达式为：[1-9]\d{6} | [1-9]\d{7} | [1-9]\d{9} | [1-9]\d{9} | [1-9]\d{10}</p>
</blockquote>
<h3 id="6-分组"><a href="#6-分组" class="headerlink" title="6. 分组"></a>6. 分组</h3><p>对于有规律的字符串，我们可以将其分组，分组每一组，从而写出可以匹配的正则表达式。</p>
<blockquote>
<p>需求：匹配 IP 地址。<br>分析：IP 地址可以分为四组，以 . 分隔开，每一组数字不能大于 255。<br>正则表达式：((25[0-5] | 2[0-4]\d | [0-1]\d{2} | [1-9]?\d).){3}(25[0-5] | 2[0-4]\d | [0-1]\d{2} | [1-9]?\d).)</p>
</blockquote>
<p>正则表达式中使用小括号指定的表达式为一个分组，默认情况下，每一个分组自动有一个组号，从左到右，以分组的左括号为标志，第一个出现的分组组号为 1，第二个出现是分组组号为 2，以此类推。正则表达式可以利用分组号引用前面组的表达式，这叫做后向引用，简化正则表达式的书写。</p>
<p>对于分组，我们也可以自定义分组名，利用自定义分组名引用相应的分组。语法为：(?\d+) 或 (?”group”\d+)，这样就把 “\d+” 的组名定义为 “group” 了。如果要引用这个分组的内容，可以使用 \k 来实现。常见的分组形式如下表所示。</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>语法</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>捕获</td>
<td>(exp)</td>
<td>匹配 exp，并捕获文本到自动命名的组里</td>
</tr>
<tr>
<td>捕获</td>
<td>(?exp) or (?”name”exp)</td>
<td>匹配 exp，并捕获文本到名称为 name 的组里</td>
</tr>
<tr>
<td>捕获</td>
<td>(?:exp)</td>
<td>匹配 exp，不捕获匹配的文本，也不给此分组分配组号</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?=exp)</td>
<td>匹配 exp 前面的位置</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?&lt;=exp)</td>
<td>匹配 exp 后面的位置</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?!exp)</td>
<td>匹配后面跟的不是 exp　位置</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?&lt;!exp)</td>
<td>匹配前面不是 exp 位置</td>
</tr>
<tr>
<td>注释</td>
<td>(?#comment)</td>
<td>提供注释</td>
</tr>
</tbody>
</table>
<h3 id="7-反义"><a href="#7-反义" class="headerlink" title="7. 反义"></a>7. 反义</h3><p>如果需求是匹配除了某一类字符集合之外的字符，这时候可以使用反义来实现。</p>
<table>
<thead>
<tr>
<th>反义</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\W</td>
<td>匹配任意不是字母、数字、下划线、汉子的字符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是空白符和字符</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意不是非数字的字符</td>
</tr>
<tr>
<td>\B</td>
<td>匹配不是单词开头或结束的位置</td>
</tr>
<tr>
<td>[^a]</td>
<td>匹配除了 a 之外的任意字符</td>
</tr>
<tr>
<td>[^abcde]</td>
<td>匹配除了 a、b、c、d、e 这几个字母之外的任意字符</td>
</tr>
<tr>
<td>[^(123 ｜ abc)]</td>
<td>匹配除了 1、2、3 或者 a、b、c 这几个字符之外的任意字符</td>
</tr>
</tbody>
</table>
<h3 id="8-贪婪与懒惰"><a href="#8-贪婪与懒惰" class="headerlink" title="8. 贪婪与懒惰"></a>8. 贪婪与懒惰</h3><p>正则表达式中包含能接受重复的限定符时，通常情况是匹配尽可能多的字符，这是贪婪模式。有时，需求不希望匹配尽可能多的字符，这时可以使用懒惰模式，就是尽可能少的匹配字符，使用 “?” 启用懒惰模式。</p>
<table>
<thead>
<tr>
<th>懒惰限定符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>*?</td>
<td>重复任意次，但尽可能少重复</td>
</tr>
<tr>
<td>+?</td>
<td>重复 1 次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>??</td>
<td>重复 0 次或 1 次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,m}?</td>
<td>重复 n 到 m 次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,}?</td>
<td>重复 n 次以上，但尽可能少重复</td>
</tr>
</tbody>
</table>
<h3 id="9-处理选项"><a href="#9-处理选项" class="headerlink" title="9. 处理选项"></a>9. 处理选项</h3><table>
<thead>
<tr>
<th>处理选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>忽略大小写</td>
<td>匹配时不区分大小写</td>
</tr>
<tr>
<td>多行模式</td>
<td>更改 “^” 和 “$” 的含义，使得它们在任意一行的行首和行尾进行匹配</td>
</tr>
<tr>
<td>单行模式</td>
<td>更改 “.” 的含义，使得它与任意字符匹配，包括换行符</td>
</tr>
<tr>
<td>忽略空白</td>
<td>忽略表达式中非转义空白并启用有 “#” 标记的注释</td>
</tr>
<tr>
<td>显示捕获</td>
<td>仅捕获已被显示命名的分组</td>
</tr>
</tbody>
</table>

          <br>
<p> from yhw-miracle</p>
<p align="center"><img src="/images/qrcode_for_gh_5efb2780ab44_258.jpg" alt="痛点就是起点"></p>
<p align="center">算法和代码的世界不仅是学习的痛点，而且是成功的起点。欢迎关注，共同进步！</p>

        </section>
      </div>
      
      <!--<div class="block">
  
    <a class="main" href="/">Home</a>
  
    <a class="main" href="/ToYou">ToYou</a>
  
    <a class="main" href="/categories">Categories</a>
  
    <a class="main" href="/atom.xml">RSS</a>
  
</div>
-->
    </div>
    <footer>
  <span class="muted">&copy; 2016 - 2019 yhw-miracle. All Rights Reserved.</span><br>
  <!--<a href='https://github.com/saintwinkle/hexo-theme-scribble' class='muted'>built with Hexo using Scribble theme</a>-->
  <img src="/images/logo.jpg" width="53" height="59" alt="痛点就是起点">
</footer>

  </body>
</html>
